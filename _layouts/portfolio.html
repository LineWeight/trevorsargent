--- 
layout: default 
---

<div class="content portfolio">
  <h1 class="title">Portfolio</h1>

  {% for show in site.posts %}

  <a href="{{show.url}}" class="show {{show.tags | join: ' '}}">
    <img src="/assets/posts/{{show.slug}}/cover.jpg" alt="">
    <div class="text">
      <h3>{{show.title}}</h3>
      <h4>{{show.theatre}}</h4>
    </div>
  </a>

  {% endfor %}

  <div class="header-bar">
    <div id="filter-label">
      <div></div>
      <a href="#_">
        <h5 id="clear">Clear</h5>
      </a>
      <a href="#_">
        <h5>Filter:</h5>
      </a>
    </div>
    <a href="#lighting" class="table-label-wrapper">
      <h5 data-tag="lighting" class="table-label">Lighting</h5>
    </a>
    <a href="#scenery" class="table-label-wrapper">
      <h5 data-tag="scenery" class="table-label">Scenery</h5>
    </a>
    <a href="#projections" class="table-label-wrapper">
      <h5 data-tag="projections" class="table-label">Projections</h5>
    </a>
    <a href="#sound" class="table-label-wrapper">
      <h5 data-tag="sound" class="table-label">Sound</h5>
    </a>
  </div>

</div>

<script>

  const shows = document.getElementsByClassName('show');
  const labels = document.getElementsByClassName('table-label')
  const clear = document.querySelector("#filter-label")

  const filterShows = (filter) => {
    for (let i = 0; i < shows.length; i++) {
      if (!shows[i].classList.contains(filter)) {
        shows[i].classList.add("hidden")
      } else {
        shows[i].classList.remove("hidden")
      }
    }

    for (let i = 0; i < labels.length; i++) {
      if (labels[i].dataset.tag == filter) {
        labels[i].classList.add('selected')
      } else {
        labels[i].classList.remove('selected')
      }
    }

    clear.classList.add('active')
  }

  const clearFilter = () => {
    for (let i = 0; i < shows.length; i++) {
      shows[i].classList.remove("hidden")
    }
    for (let i = 0; i < labels.length; i++) {
      labels[i].classList.remove('selected')
    }
    clear.classList.remove("active")
  }

  const updateFilter = (x) => {
    const hash = window.location.hash.replace("#", "")
    const options = ["lighting", "scenery", "projections", "sound"]

    if (options.indexOf(hash) > -1) {
      filterShows(hash)
    } else {
      clearFilter();
    }

  }

  updateFilter();
  window.addEventListener("hashchange", updateFilter)


</script>